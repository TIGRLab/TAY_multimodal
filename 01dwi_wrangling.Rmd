---
title: "01dwi_wrangling"
author: "Anisha Miah"
date: "2025-06-04"
output: html_document
---

```{r setup}
library(tidyverse)
```
/archive/data/TAY/pipelines/versioned_outputs/pet_subsample/
## R Markdown
```{r}
sub_CMH00000041_ses_05_desc_aparcaseg_model_noddi_results <- read_delim("/mnt/tigrlab/archive/data-2.0/TAY/pipelines/versioned_outputs/pet_subsample/ciftify_parcellations/sub-CMH00000041/ses-05/dwi/sub-CMH00000041_ses-05_desc-aparcaseg_model-noddi_results.tsv", 
delim = "\t", escape_double = FALSE, trim_ws = TRUE)
```


```{r}
files_list = list.files(path ="/archive/data/TAY/pipelines/versioned_outputs/pet_subsample/ciftify_parcellations/", pattern="desc-aparcaseg_model-noddi_results.tsv", recursive = TRUE, full.names=TRUE)
```
```{r}
#want to use read_delim file like earlier to concatenate
# using anonymous function (~) for own interest
#desc_aparcaseg_model_noddi_results = files_list %>% map_dfr(~ read_delim(.x, delim = "\t", escape_double = FALSE, trim_ws = TRUE))

desc_aparcaseg_model_noddi_results = map_dfr(files_list, function(x) 
    {read_delim (x, delim = "\t", escape_double = FALSE, trim_ws = TRUE, show_col_types=FALSE)}) #show_col_types to quiet message
```
```{r}
#concatenate all patients BOLD-alff.tsv files
files_list_alff_xcpd = list.files(path = "/scratch/galinejad/ScanD/SHARED_FOLDER_25/xcp_d/0.7.3/", pattern="Parcels_stat-alff_bold.tsv", recursive = TRUE, full.names=TRUE)

alff_xcpd_results = map_dfr(files_list_alff_xcpd, function(x)
  {read_delim (x, delim = "\t", show_col_types = FALSE) %>% 
    mutate(subject = x)
})
```
```{r}
x="/scratch/galinejad/ScanD/SHARED_FOLDER_25/xcp_d/0.7.3/sub-103/func/sub-103_task-matchjudgment_run-01_space-fsLR_seg-4S156Parcels_stat-alff_bold.tsv"

practice_delim = read_delim("/scratch/galinejad/ScanD/SHARED_FOLDER_25/xcp_d/0.7.3/sub-103/func/sub-103_task-matchjudgment_run-01_space-fsLR_seg-4S156Parcels_stat-alff_bold.tsv", delim="\t", show_col_types=FALSE) 


#trying to figure out how to include subject name only mentioned in file path
practice_delim %>% mutate(subject_name = str_extract(x, pattern = "sub-*"))
```


This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
